(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{363:function(s,t,a){"use strict";a.r(t);var e=a(42),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"持续集成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#持续集成"}},[s._v("#")]),s._v(" 持续集成")]),s._v(" "),a("h2",{attrs:{id:"ssh-协议文件传输"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-协议文件传输"}},[s._v("#")]),s._v(" SSH 协议文件传输")]),s._v(" "),a("h3",{attrs:{id:"ssh-自动认证密码登录远程服务器配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-自动认证密码登录远程服务器配置"}},[s._v("#")]),s._v(" ssh 自动认证密码登录远程服务器配置")]),s._v(" "),a("p",[s._v("添加一下配置到电脑目录"),a("code",[s._v("/.ssh/config")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Host myremote            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# any name for the host")]),s._v("\n\nHostName "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".178.05  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# IP, .local, or hostname if defined")]),s._v("\n\nUser username            "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# your username")]),s._v("\n\nPort "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("                  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# port to listen")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("设置完成后删除"),a("code",[s._v("#")]),s._v("开头的注释，不然回报 "),a("code",[s._v('/Users/username/.ssh/config line 10: garbage at end of line; "#".')]),s._v(" 的错误，具体原因不是很清楚，只能先这样设置。")]),s._v(" "),a("h4",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" myremote\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("参考")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/44060824ec2a",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.jianshu.com/p/44060824ec2a"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://askubuntu.com/questions/257472/host-alias-for-ssh",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://askubuntu.com/questions/257472/host-alias-for-ssh"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"scp-两台服务器无密码传输文件配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scp-两台服务器无密码传输文件配置"}},[s._v("#")]),s._v(" SCP 两台服务器无密码传输文件配置")]),s._v(" "),a("ol",[a("li",[s._v("将 主机 A "),a("code",[s._v(".ssh")]),s._v(" 目录中的 "),a("code",[s._v("id_rsa.pub")]),s._v(" 文件复制到 主机 B 的 "),a("code",[s._v("~/.ssh/")]),s._v(" 目录中，并改名为 "),a("code",[s._v("authorized_keys")]),s._v("。")])]),s._v(" "),a("p",[s._v("scp .ssh/id_rsa.pub 192.168.10.2:/root/.ssh/authorized_keys")]),s._v(" "),a("p",[s._v("以后从 A 主机 scp 到 B 主机就不需要密码了")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("测试主机 A 文件 复制到主机 B")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">|")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" IP:/dirname\n\nEXP. "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1:/var/www\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("复制成功")]),s._v(" "),a("h2",{attrs:{id:"项目持续集成方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目持续集成方案"}},[s._v("#")]),s._v(" 项目持续集成方案")]),s._v(" "),a("h3",{attrs:{id:"github-actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-actions"}},[s._v("#")]),s._v(" github actions")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("在项目根目录新建"),a("code",[s._v(".github/workflows/")]),s._v("目录结构，在"),a("code",[s._v("workflows")]),s._v("目录新建一个以"),a("code",[s._v("yml")]),s._v("为扩展名的文件，文件可以自由命名")])]),s._v(" "),a("li",[a("p",[s._v("搜索"),a("code",[s._v("github")]),s._v("官方的"),a("code",[s._v("actions")]),s._v("市场，选择一个适合自己的持续集成方案"),a("code",[s._v("action")]),s._v(",目前以"),a("code",[s._v("actions-gh-pages")]),s._v("为例配置文件如下")])])]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" peaceiris/actions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pages@v3\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("personal_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.PERSONAL_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("publish_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dist\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("allow_empty_commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("文件中的"),a("code",[s._v("secrets.PERSONAL_TOKEN")]),s._v("是个人"),a("code",[s._v("github")]),s._v("账号的生产的"),a("code",[s._v("personal access token")]),s._v("，需要为这个加密字段配置\n"),a("code",[s._v("repo")]),s._v("访问的权限才能生效。")]),s._v(" "),a("blockquote",[a("p",[s._v("参考: "),a("a",{attrs:{href:"https://juejin.im/post/6845166891665719309",target:"_blank",rel:"noopener noreferrer"}},[s._v("持续集成利器，GitHub Actions"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"git-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-hooks"}},[s._v("#")]),s._v(" Git hooks")]),s._v(" "),a("ol",[a("li",[s._v("下载"),a("a",{attrs:{href:"https://github.com/yyx990803/yorkie",target:"_blank",rel:"noopener noreferrer"}},[s._v("yorkie"),a("OutboundLink")],1),s._v("模块")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" yorkie --save-dev\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("配置"),a("code",[s._v("package.json")]),s._v("文件中的"),a("code",[s._v("gitHooks")]),s._v("字段")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gitHooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"pre-push"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run deploy"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("配置完成后，每次项目提交到远程仓库之前都会执行"),a("code",[s._v("pre-push")]),s._v("的命令")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("参考:")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/weixin_33750452/article/details/91399836",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.csdn.net/weixin_33750452/article/details/91399836"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/coldfrost/p/11547362.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/coldfrost/p/11547362.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);